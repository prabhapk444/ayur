const cssClasses={imagepicker:{item:"sv_q_imgsel w-full inline-block !mr-0 text-center",image:"sv_image_image w-20 h-20 mx-auto checked:invert-to-white",root:"sv_imagesel grid grid-cols-2 tablet:grid-cols-3 gap-x-4 gap-y-8 justify-center",label:"sv_q_imgsel_label relative inline-block w-pxless h-pxless top-px text-center bg-beige-100 angle-corner-small",itemInline:"sv_q_imagepicker_inline angle-corner-small bg-beige-500 relative",itemText:"sv_q_imgsel_text inline-block py-3 px-4",itemControl:"sv_q_imgsel_control_item hidden",itemDecorator:"",imageContainer:"sd-imagepicker__image-container py-3 border-b border-beige-500 checked:bg-terracotta-500 checked:border-black checked:border",itemChecked:"sd-imagepicker__item--checked checked",checkedItemSvgIcon:"hidden",mainRoot:"sd-element sd-question sd-row__question py-4 px-4 mt-3"},radiogroup:{label:"sv_q_radiogroup_label justify-left relative inline-block w-pxless h-pxless top-px text-center bg-beige-100 cursor-pointer py-6 p-2.5 checked:bg-terracotta-500 angle-corner-small checked:text-white",itemControl:"sv_q_radiogroup_control_item hidden",item:"sv_q_radiogroup !w-full !p-0 angle-corner-small bg-beige-500 relative",root:"sv_qcbc text-center mt-2.5 grid grid-cols-2 justify-center gap-x-4 gap-y-8",itemChecked:"checked bg-black"},question:{title:"sv_q_title text-h3 font-main mb-6 pb-2 capitalize",mainRoot:"sv_q sv_qstn py-4 px-4 mt-3",titleBar:"hidden"},html:{mainRoot:"sv_q sv_qstn"}};window.redirectURL="/pages/subscription";function initImagePicker(survey2,options){if(options.question.getType()==="imagepicker"){const rowEls=options.htmlElement.querySelectorAll(".sv_q_imgsel_image");for(let i=0;i<rowEls.length;i++){const span=document.createElement("span");span.innerHTML=rowEls[i].outerHTML,rowEls[i].parentNode.insertBefore(span,rowEls[i]),rowEls[i].remove()}}}function updateHistory(sender){history.replaceState({page:sender.currentPageNo,answer:Object.values(sender.currentPage.getValue())[0]},"",`?page=${sender.currentPage.name}`)}function updateNavigation(survey2){const currentPageName=survey2.currentPage.name;if(!currentPageName)return;const[currentSection,sectionProgress]=currentPageName.split("-"),pageNavs=document.querySelectorAll(".survey-section"),currentSectionIndex=Array.from(pageNavs).map(n=>n.dataset.section).findIndex(h=>h===currentSection);for(let i=0;i<pageNavs.length;i++){const pageNav=pageNavs[i];if(i<currentSectionIndex)pageNav.classList.remove("w-3/6","active"),pageNav.classList.add("completed","w-1/6");else if(i===currentSectionIndex){pageNav.classList.remove("w-1/6","completed"),pageNav.classList.add("active","w-3/6");const[currentPage,totalPages]=sectionProgress.split("/");if(currentPage>1){const completedProgress=`${currentPage-1}/${totalPages}`;pageNav.querySelector(".bg-terracotta-500").classList.value=pageNav.querySelector(".bg-terracotta-500").classList.value.replace(/w-\d[^ ]*/,`w-${completedProgress}`)}}else pageNav.classList.remove("w-3/6","active","completed"),pageNav.classList.add("w-1/6"),pageNav.querySelector(".bg-terracotta-500").classList.value=pageNav.querySelector(".bg-terracotta-500").classList.value.replace(/w-\d[^ ]*/,"w-0")}document.title=survey2.currentPage.questions[0].title,(Object.values(survey2.currentPage.data).length===0||history.state&&history.state.answer!==Object.values(survey2.currentPage.getValue())[0])&&history.pushState({page:survey2.currentPageNo},"",`?page=${survey2.currentPage.name}`)}function tieBreaker(params){if(!params&&params.length<1||params[0]===null)return;const _data=this.survey.data;let prakruti,v=0,p=0,k=0;for(let key in _data)_data.hasOwnProperty(key)&&key!=="question14"&&(_data[key].startsWith("Vata")&&v++,_data[key].startsWith("Pitta")&&p++,_data[key].startsWith("Kapha")&&k++);return v>p&&v>k?p===k||p===0&&k===0?prakruti="Vata":prakruti=!1:p>v&&p>k?v===k||v===0&&k===0?prakruti="Pitta":prakruti=!1:k>v&&k>p?v===p||p===0&&v===0?prakruti="Kapha":prakruti=!1:v===p?prakruti="Kapha":v===k?prakruti="Pitta":p===k?prakruti="Vata":prakruti=!1,console.log(prakruti,v,k,p),prakruti}function surveyRendered(){window.surveyReady=!0,document.dispatchEvent(new Event("surveyReady")),typeof SkVxGtmSuite<"u"&&SkVxGtmSuite.utils.pushToDataLayer({event:"dl_vpq_start"})}function getPrakruti(vpq_result){let v=0,p=0,k=0,prakruti=null;for(const key in vpq_result)vpq_result.hasOwnProperty(key)&&(vpq_result[key].indexOf("Vata")===0&&v++,vpq_result[key].indexOf("Pitta")===0&&p++,vpq_result[key].indexOf("Kapha")===0&&k++);return v>p&&v>k?p>k?prakruti="Vata-Pitta":prakruti="Vata-Kapha":p>v&&p>k?v>k?prakruti="Pitta-Vata":prakruti="Pitta-Kapha":k>v&&k>p?v>p?prakruti="Kapha-Vata":prakruti="Kapha-Pitta":v===p?prakruti="Vata-Pitta":p===k?prakruti="Pitta-Kapha":k===v&&(prakruti="Kapha-Vata"),prakruti}function setPrakrutiId(resp){switch(resp.prakruti){case"Kapha-Pitta":resp.prakrutiId="1001";break;case"Kapha-Vata":resp.prakrutiId="1002";break;case"Pitta-Kapha":resp.prakrutiId="1003";break;case"Pitta-Vata":resp.prakrutiId="1004";break;case"Vata-Kapha":resp.prakrutiId="1005";break;case"Vata-Pitta":resp.prakrutiId="1006";break;default:resp.prakrutiId="1000"}return resp}function setHairAndScalpType(vpq){const hairType=vpq.question12,hairTexture=vpq.question13a,scalpTexture=vpq.question13;if(hairTexture&&hairType&&scalpTexture){switch(scalpTexture){case"Kapha-Normal to oily":vpq.scalpTypeId="5001",vpq.scalpType="Normal to oily";break;case"Pitta-Oily":vpq.scalpTypeId="5002",vpq.scalpType="Oily";break;case"Vata-Dry":vpq.scalpTypeId="5003",vpq.scalpType="Dry";break;default:vpq.scalpTypeId="5001",vpq.scalpType="Normal to oily";break}switch(hairType){case"Kapha-Curly":vpq.hairTypeId="5001",vpq.hairType="Curly";break;case"Pitta-Straight":vpq.hairTypeId="5002",vpq.hairType="Straight";break;case"Vata-Wavy":vpq.hairTypeId="5003",vpq.hairType="Wavy";break;default:vpq.hairTypeId="5001",vpq.hairType="Curly";break}switch(hairTexture){case"Kapha-Full and lustrous":vpq.hairTextureId="7001",vpq.hairTexture="Normal to oily";break;case"Pitta-Silky and smooth":vpq.hairTextureId="7002",vpq.hairTexture="Oily";break;case"Vata-Rough and dry":vpq.hairTextureId="7003",vpq.hairTexture="Dry";break;default:vpq.hairTextureId="7001",vpq.hairTexture="Normal to oily";break}}return vpq}function vpqComplete(result){showThankYouPage(result.data);let vpq_result=result.data;vpq_result.prakruti=getPrakruti(vpq_result),vpq_result=setPrakrutiId(vpq_result),vpq_result=setHairAndScalpType(vpq_result),vpq_result.hasOwnProperty("primaryconcern")||(vpq_result.primaryconcern="hairfall"),vpq_result.healthconcern=vpq_result["question33-concerns"],console.log(vpq_result),typeof SkVxGtmSuite<"u"&&SkVxGtmSuite.utils.pushToDataLayer({event_id:uuidv4(),event:"vpqComplete",user_properties:{customer_gender:vpq_result.question1c}}),deleteCookie("hairSurveyData"),setCookie("surveyData",encodeURI(JSON.stringify(vpq_result)),1),setTimeout(function(){window.location.href=window.redirectURL},3e3)}function showThankYouPage(vpq_result){vpq_result.question1c==="Male"&&(document.querySelector(".vpq-end .women").classList.add("hidden"),document.querySelector(".vpq-end .men").classList.remove("hidden")),document.querySelector(".vpq-wizard").classList.add("hidden"),document.querySelectorAll(".header-nav").forEach(el=>el.classList.add("hidden")),document.querySelector(".vpq-end").classList.remove("hidden")}document.addEventListener("DOMContentLoaded",function(){Survey.FunctionFactory.Instance.register("tieBreaker",tieBreaker),window.survey=new Survey.Model(vpqJson),survey.locale=document.documentElement.getAttribute("lang"),survey.onAfterRenderQuestion.add(initImagePicker),survey.onValueChanged.add(updateHistory),survey.onCurrentPageChanged.add(updateNavigation),survey.onAfterRenderSurvey.add(surveyRendered),survey.onComplete.add(vpqComplete),survey.css=cssClasses,ko.applyBindings({model:survey});const inputEl=document.getElementById("question1-name"),buttonEl=document.getElementById("start-quiz"),clearInput=document.getElementById("question1-name-clear");inputEl.addEventListener("input",function(){const name=this.value;this.classList.remove("invalid:border-terracotta-500","invalid:text-terracotta-500"),name.length>2?this.classList.add("is-dirty"):this.classList.remove("is-dirty"),this.checkValidity()?(survey.data={"question1-name":name},document.querySelectorAll(".customer_name").forEach(el=>el.innerHTML=name),buttonEl.classList.remove("opacity-50","pointer-events-none")):(name.length>2&&this.classList.add("invalid:border-terracotta-500","invalid:text-terracotta-500"),buttonEl.classList.add("opacity-50","pointer-events-none"))}),clearInput.addEventListener("click",function(){inputEl.value="",buttonEl.classList.add("opacity-50","pointer-events-none")});const enterQuiz=e=>{e.preventDefault(),inputEl.checkValidity()&&(document.querySelector(".vpq-start").classList.add("hidden"),document.querySelector(".vpq-wizard").classList.remove("hidden"),document.querySelectorAll(".header-nav").forEach(el=>el.classList.remove("hidden")),history.pushState({page:survey.currentPageNo},"",`?page=${survey.currentPage.name}`),document.title=survey.currentPage.questions[0].title)},hideQuiz=()=>{document.querySelector(".vpq-start").classList.remove("hidden"),document.querySelector(".vpq-wizard").classList.add("hidden"),document.querySelectorAll(".header-nav").forEach(el=>el.classList.add("hidden"))};document.getElementById("start-quiz").addEventListener("click",enterQuiz),document.querySelector(".vpq-start form").addEventListener("submit",enterQuiz),document.querySelector(".header-back").addEventListener("click",function(){survey.currentPageNo>0?survey.currentPageNo--:hideQuiz()}),document.querySelector("survey").addEventListener("click",function(e){(e.target.closest(".sv_q_imgsel.checked")||e.target.closest(".sv_q_radiogroup.checked"))&&(e.stopPropagation(),console.log(e.target.closest(".sv_q_imgsel.checked"),e.target.closest(".sv_q_radiogroup.checked")),survey.nextPage())},!0)}),window.onpopstate=event=>{event.state&&typeof event.state.page<"u"&&(survey.currentPageNo=event.state.page)};
//# sourceMappingURL=/cdn/shop/t/7/assets/vpq-common.js.map?v=44315595014805924951710396800
